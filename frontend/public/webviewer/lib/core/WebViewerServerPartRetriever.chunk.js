/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{588:function(ya,ua,n){function pa(){return!1}function oa(z,aa,ea){if(!(aa in r))return!0;aa=r[aa];for(var ba=0;ba<aa.length;ba++){var ha=z;var ca=aa[ba];var ma=ea;if(ca.name in ha){var la="",ja=!1;ha=ha[ca.name];switch(ca.type){case "s":la="String";ja=Object(ia.isString)(ha);break;case "a":la="Array";ja=Object(ia.isArray)(ha);break;case "n":la="Number";ja=Object(ia.isNumber)(ha)&&Object(ia.isFinite)(ha);break;case "o":la="Object",
ja=Object(ia.isObject)(ha)&&!Object(ia.isArray)(ha)}ja||ma.reject('Expected response field "'.concat(ca.name,'" to have type ').concat(la));ca=ja}else ma.reject('Response missing field "'.concat(ca.name,'"')),ca=!1;if(!ca)return!1}return!0}function na(z){for(var aa=0,ea=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];aa<ea.length;aa++){var ba=ea[aa],ha=ba;ba=ba.charAt(0).toUpperCase()+ba.slice(1);z[ha]&&(Object.defineProperty(z,
ba,Object.getOwnPropertyDescriptor(z,ha)),delete z[ha])}return z}n.r(ua);var ka=n(0),ia=n(1);n.n(ia);var fa=n(3);ya=n(55);var x=n(34),y=n(606),w=n(122),b=n(500),f=n(56),h=n(222),e=function(){function z(){this.request=this.result=null;this.state=0;var aa=this;aa.promise=new Promise(function(ea,ba){aa.resolve=function(){if(0===aa.state||4===aa.state)aa.state=1,aa.result=arguments[0],ea.apply(null,arguments)};aa.reject=function(){if(0===aa.state||4===aa.state)aa.state=2,ba.apply(null,arguments)}})}z.prototype.ez=
function(){return 1===(this.state&1)};z.prototype.OBa=function(){return 2===(this.state&2)};z.prototype.em=function(){return!this.OBa()&&!this.ez()};z.prototype.fBa=function(){return 4===(this.state&4)};z.prototype.SY=function(){this.state|=4};return z}(),a=function(){function z(){this.Ry={};this.Mc=[]}z.prototype.pop=function(){var aa=this.Mc.pop();this.Ry[aa.key]=void 0;return aa};z.prototype.push=function(aa,ea){ea={key:aa,data:ea};this.Mc.push(ea);this.Ry[aa]=ea.data};z.prototype.contains=function(aa){return!!this.Ry[aa]};
z.prototype.get=function(aa){return this.Ry[aa]};z.prototype.set=function(aa,ea){var ba=this;this.Ry[aa]=ea;this.Mc.forEach(function(ha,ca){ha.key===aa&&(ba.Mc[ca]=ha)})};z.prototype.remove=function(aa){var ea=this;this.Ry[aa]=void 0;this.Mc.forEach(function(ba,ha){ba.key===aa&&ea.Mc.splice(ha,1)})};z.prototype.length=function(){return this.Mc.length};return z}(),r={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",
type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};n=function(){function z(aa,ea,ba){var ha=this;this.wZ=this.W5=!1;this.Fj=this.NO=this.GA=this.rg=this.eC=this.Os=this.dC=this.Wq=
null;this.sq=new e;this.tu=new e;this.zJ=!1;this.Ih=this.vg=this.wg=this.xh=null;this.fi=[];this.uK=[];this.cache={};this.timeStamp=0;this.Aj=[];this.qm=[];this.fT=null;this.I5=!1;this.Zda=this.id=null;this.nW=this.o9=pa;this.Xh=0;this.WU=!1;this.Daa=1;this.lm={};this.ox=0;this.Pz=new a;ea.endsWith("/")||(ea+="/");ba=ba||{};this.W5=ba.disableWebsockets||!1;this.wZ=ba.singleServerMode||!1;null!=ba.customQueryParameters&&Object(f.b)("wvsQueryParameters",ba.customQueryParameters);ea.endsWith("blackbox/")||
(ea+="blackbox/");this.Wq=ba.uploadData||null;this.GA=ba.uriData||null;this.dC=ba.cacheKey||null;if(this.Os=ba.officeOptions||null)this.Os=na(this.Os);this.rg=ba.rasterizerOptions||null;this.eC=ba.cadOptions||null;this.Qg=ea;this.GS=aa;this.ct(!0);this.Kx=(new y.a(ea,null,this.zk())).Bva(!this.W5,function(ca){ha.$Da(ca)},function(){return null},function(){ha.zJ=!1},function(){ha.kIa()})}z.prototype.Cra=function(){var aa=this;return new Promise(function(ea,ba){var ha=new XMLHttpRequest,ca="".concat(aa.Qg,
"ck");ha.open("GET",ca);ha.withCredentials=aa.zk();ha.onreadystatechange=function(){ha.readyState===XMLHttpRequest.DONE&&(200===ha.status?ea():ba())};ha.send()})};z.prototype.iKa=function(aa){this.o9=aa||pa;this.nW=pa};z.prototype.Kpa=function(){this.rda();return this.Kx.Ju()};z.prototype.rda=function(){Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(aa){switch(aa.label){case 0:return this.tu=new e,this.sq=new e,this.zJ=!1,this.id=null,this.I5=!1,[4,this.Cra().catch(function(){})];
case 1:return aa.aa(),[2]}})})};z.prototype.kIa=function(){this.o9();this.rda();this.xh&&(this.xh.em()?this.Lj(this.xh.request):this.xh.ez()&&this.nW(this.xh.result.url,"pdf")&&(this.xh=null,this.oda()));this.Ih&&this.Ih.em()&&this.Lj(this.Ih.request);this.wg&&this.wg.em()?this.Lj(this.wg.request):this.vg&&this.vg.em()&&this.T8();var aa;for(aa=0;aa<this.Aj.length;aa++)this.Aj[aa]&&(this.Aj[aa].em()?this.Lj(this.Aj[aa].request):this.Aj[aa].ez()&&this.nW(this.Aj[aa].result.url,"image")&&(this.Aj[aa]=
null,this.wN(Object(ia.uniqueId)(),aa)));for(aa=0;aa<this.qm.length;aa++)this.qm[aa]&&this.qm[aa].em()&&!this.qm[aa].fBa()&&this.Lj(this.qm[aa].request);for(aa=0;aa<this.fi.length;aa++)this.fi[aa]&&this.fi[aa].em()&&this.Lj(this.fi[aa].request)};z.prototype.rAa=function(){return this.zJ?Promise.resolve():(this.zJ=!0,this.timeStamp=Date.now(),this.Kx.JL())};z.prototype.LNa=function(){var aa=this,ea,ba,ha,ca,ma;return new Promise(function(la,ja){if(aa.Wq)ea=new FormData,ea.append("file",aa.Wq.fileHandle,
aa.Wq.fileHandle.name),aa.Os&&ea.append("officeOptions",JSON.stringify(aa.Os)),aa.rg&&ea.append("rasterizerOptions",JSON.stringify(aa.rg)),aa.eC&&ea.append("cadOptions",aa.eC.getJsonString()),aa.dC&&ea.append("cacheKey",aa.dC),ba=aa.Wq.loadCallback,ca="upload",ha=aa.Wq.extension;else if(aa.GA)ea={uri:aa.GA.uri,XSa:aa.GA.shareId},ea=Object.keys(ea).map(function(sa){return"".concat(sa,"=").concat(ea[sa]?encodeURIComponent(ea[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",
ba=aa.GA.loadCallback,ca="url",ha=aa.GA.extension;else{la();return}var ra=new XMLHttpRequest,qa=Object(x.k)(aa.Qg,"AuxUpload");qa=Object(h.a)(qa,{type:ca,ext:ha});ra.open("POST",qa);ra.withCredentials=aa.zk();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);aa.GS=sa.uri;ba(sa);la(sa)}});ra.addEventListener("error",function(){ja("".concat(ra.statusText," ").concat(JSON.stringify(ra)))});aa.Wq&&
null!=aa.Wq.onProgress&&(ra.upload.onprogress=function(sa){aa.Wq.onProgress(sa)});ra.send(ea)})};z.prototype.XHa=function(aa){this.password=aa||null;this.sq.ez()||(this.sq=new e,this.Lj({t:"pages"}));return this.sq.promise};z.prototype.AF=function(aa){this.fT=aa||null;this.sq.ez()||this.Lj({t:"pages"});return this.sq.promise};z.prototype.rC=function(aa){aa=Object.assign(aa,{uri:encodeURIComponent(this.GS)});this.fT&&(aa.ext=this.fT);this.Fj&&(aa.c=this.Fj);this.password&&(aa.pswd=this.password);this.dC&&
(aa.cacheKey=this.dC);this.Os&&(aa.officeOptions=this.Os);this.rg&&(aa.rastOptions=this.rg);this.eC&&(aa.cadOptions=this.eC.mImpl);return aa};z.prototype.SIa=function(){0<this.Pz.length()&&10>=this.ox&&this.TIa(this.Pz.pop().data)};z.prototype.Voa=function(aa){0<this.Pz.length()&&this.Pz.contains(aa)&&this.Pz.remove(aa)};z.prototype.Lj=function(aa){aa=this.rC(aa);this.Kx.send(aa)};z.prototype.Uda=function(aa,ea){10<this.ox?this.Pz.push(aa,ea):(this.ox++,aa=this.rC(ea),this.Kx.send(aa))};z.prototype.TIa=
function(aa){this.ox++;aa=this.rC(aa);this.Kx.send(aa)};z.prototype.qp=function(aa){return aa};z.prototype.n9=function(aa){this.wZ&&aa?Object(fa.i)("Server failed health check. Single server mode ignoring check."):!this.fRa&&aa&&3>=this.Xh?(this.WU=!0,this.Kx.Ju()):3<this.Xh&&(this.wZ=!0)};z.prototype.$Da=function(aa){var ea=this,ba=aa.data,ha=aa.err,ca=aa.t;switch(ca){case "upload":ha?this.MNa.reject(ha):this.MNa.resolve("Success");break;case "pages":ha?this.sq.reject(ha):oa(ba,ca,this.sq)&&this.sq.resolve(ba);
break;case "config":if(ha)this.tu.reject(ha);else if(oa(ba,ca,this.tu)){this.n9(ba.unhealthy);ba.id&&(this.id=ba.id);if(ba.auth){var ma=Object(f.a)("wvsQueryParameters");ma.auth=ba.auth;Object(f.b)("wvsQueryParameters",ma)}ba.serverVersion&&(this.NO=ba.serverVersion,Object(fa.g)("[WebViewer Server] server version: ".concat(this.NO)));ba.serverID?(this.Xh=ba.serverID===this.Zda&&this.WU?this.Xh+1:0,this.Zda=ba.serverID):this.Xh=0;this.WU=!1;this.tu.resolve(ba)}break;case "health":ha?this.tu.reject(ha):
oa(ba,ca,this.tu)&&this.n9(ba.unhealthy);break;case "pdf":ba.url=Object(h.a)("".concat(this.Qg,"../").concat(encodeURI(ba.url)));ha?this.xh.reject(ha):oa(ba,ca,this.xh)&&this.xh.resolve(ba);break;case "ApString2Xod":ba.url=Object(h.a)("".concat(this.Qg,"../data/").concat(encodeURI(ba.url)));ha?this.lm[ba.rID].reject(ha):oa(ba,ca,this.lm[ba.rID])&&this.lm[ba.rID].resolve(ba);break;case "docmod":ba.url=Object(h.a)("".concat(this.Qg,"../").concat(encodeURI(ba.url)));ha?this.lm[ba.rID].reject(ha):oa(ba,
ca,this.xh)&&this.lm[ba.rID].resolve(ba);break;case "xod":if(ha)this.wg&&this.wg.em()&&this.wg.reject(ha),this.vg&&this.vg.em()&&this.vg.reject(ha);else if(ba.notFound)ba.noCreate||this.wg&&this.wg.em()&&this.wg.resolve(ba),this.vg&&this.vg.em()&&this.vg.resolve(ba);else{ba.url&&(ba.url=Object(h.a)("".concat(this.Qg,"../").concat(encodeURI(ba.url))));if(!this.vg||this.vg.ez())this.vg=new e,this.vg.request={t:"xod",noCreate:!0};this.wg||(this.wg=new e,this.wg.request={t:"xod"});this.vg.resolve(ba);
this.wg.resolve(ba)}break;case "cAnnots":ma=this.Ih;if(ha)ma.reject(ha);else if(oa(ba,ca,ma)){ma.SY();var la=[],ja=ba.annots;ba=function(Aa){var Ca=ja[Aa].s,za=ja[Aa].e,Ga="".concat(ra.Qg,"../").concat(encodeURI(ja[Aa].xfdf)),Ea="true"===ja[Aa].hasAppearance?Object(h.a)("".concat(Ga,".xodapp")):null,Ja=Object(ia.range)(Ca,za);la[Aa]={range:Ja,promise:new Promise(function(Oa,Na){var Ra=new XMLHttpRequest;Ra.open("GET",Object(h.a)(Ga));Ra.responseType="text";Ra.withCredentials=ea.zk();Ra.addEventListener("load",
function(){Ra.readyState===Ra.DONE&&200===Ra.status&&Oa({uw:Ra.response,fp:Ea,range:Ja})});Ra.addEventListener("error",function(){Na("".concat(Ra.statusText," ").concat(JSON.stringify(Ra)))});Ra.send()})}};var ra=this;for(ha=0;ha<ja.length;ha++)ba(ha);ma.resolve(la)}break;case "annots":if(ha)this.Ih.reject(ha);else if(oa(ba,ca,this.Ih)){this.Ih.SY();var qa=new XMLHttpRequest;ma="".concat(this.Qg,"../").concat(encodeURI(ba.url));var sa=ba.hasAppearance?Object(h.a)("".concat(ma,".xodapp")):null;qa.open("GET",
Object(h.a)(ma));qa.responseType="text";qa.withCredentials=this.zk();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&ea.Ih.resolve({uw:qa.response,fp:sa})});qa.addEventListener("error",function(){ea.Ih.reject("".concat(qa.statusText," ").concat(JSON.stringify(qa)))});qa.send()}break;case "image":this.ox--;var ta=this.Aj[ba.p];ha?ta.promise.reject(ha):oa(ba,ca,ta)&&(ta.result=ba,ta.result.url=Object(h.a)("".concat(this.Qg,"../").concat(encodeURI(ta.result.url))),ta.resolve(ta.result));
break;case "tiles":this.ox--;ta=ba.rID;ma=this.fi[ta];this.fi[ta]=null;this.uK.push(ta);if(ha)ma.reject(ha);else if(oa(ba,ca,ma)){for(ha=0;ha<ba.tiles.length;ha++)ba.tiles[ha]=Object(h.a)("".concat(this.Qg,"../").concat(encodeURI(ba.tiles[ha])));ma.resolve(ba)}break;case "text":ta=this.qm[ba.p];if(ha)ta.reject(ha);else if(oa(ba,ca,ta)){ta.SY();var va=new XMLHttpRequest;ba=Object(h.a)("".concat(this.Qg,"../").concat(encodeURI(ba.url)));va.open("GET",ba);va.withCredentials=this.zk();va.addEventListener("load",
function(){va.readyState===va.DONE&&200===va.status&&(ta.result=JSON.parse(va.response),ta.resolve(ta.result))});va.addEventListener("error",function(Aa){ta.reject("".concat(va.statusText," ").concat(JSON.stringify(Aa)))});va.send()}break;case "progress":"loading"===ba.t&&this.trigger(w.a.Events.DOCUMENT_LOADING_PROGRESS,[ba.bytes,ba.total])}this.SIa();!ca&&aa.echo&&aa&&"apstring2xod"===aa.echo.t&&(aa=aa.echo.reqID)&&(2<=parseInt(this.NO,10)?this.lm[aa].reject("Message unhandled by server"):this.lm[aa].reject())};
z.prototype.kwa=function(){return Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(aa){switch(aa.label){case 0:return[4,this.rAa()];case 1:return aa.aa(),[2,this.tu.promise]}})})};z.prototype.Qva=function(aa){for(var ea=this,ba=new XMLHttpRequest,ha=Object(h.a)("".concat(this.Qg,"aul"),{id:this.id}),ca=new FormData,ma={},la=0;la<aa.body.length;la++){var ja=aa.body[la];ma[ja.id]="".concat(ja.hR.w,";").concat(ja.hR.h);ca.append(ja.id,ja.hR.dataString)}aa={t:"apstring2xod",
reqID:this.Daa++,parts:ma};var ra=this.rC(aa);ca.append("msg",JSON.stringify(ra));this.lm[ra.reqID]=new e;ba.open("POST",ha);ba.withCredentials=this.zk;ha=new Promise(function(qa,sa){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?qa():sa("An error occurred while sending down appearance strings to the server"))}});ba.send(ca);return ha.then(function(){return ea.lm[ra.reqID].promise})};z.prototype.Opa=function(){var aa=this.NO.split("-")[0].split("."),ea=["1","5","9"];if(3!==aa.length)throw Error("Invalid WVS version length.");
if(3!==ea.length)throw Error("Invalid version length.");for(var ba=0;ba<aa.length;++ba){if(ea.length===ba||aa[ba]>ea[ba])return-1;if(aa[ba]!==ea[ba])return 1}return 0};z.prototype.ou=function(){return 0>=this.Opa()};z.prototype.vT=function(){this.Ih||(this.Ih=new e,this.ou()?this.Ih.request={t:"cAnnots"}:this.Ih.request={t:"annots"},this.Lj(this.Ih.request));return this.Ih.promise};z.prototype.wN=function(aa,ea){this.Aj[ea]||(this.Aj[ea]=new e,this.Aj[ea].request={t:"image",p:ea},this.Uda(aa,this.Aj[ea].request));
return this.Aj[ea].promise};z.prototype.YHa=function(aa){this.qm[aa]||(this.qm[aa]=new e,this.qm[aa].request={t:"text",p:aa},this.Lj(this.qm[aa].request));return this.qm[aa].promise};z.prototype.ZHa=function(aa,ea,ba,ha,ca){var ma=this.fi.length;this.uK.length&&(ma=this.uK.pop());this.fi[ma]=new e;this.fi[ma].request={t:"tiles",p:ea,z:ba,r:ha,size:ca,rID:ma};this.Uda(aa,this.fi[ma].request);return this.fi[ma].promise};z.prototype.oda=function(){this.xh||(this.xh=new e,this.xh.request={t:"pdf"},this.I5?
this.xh.resolve({url:this.GS}):this.Lj(this.xh.request));return this.xh.promise};z.prototype.Y7=function(aa){var ea=this,ba=new XMLHttpRequest,ha=Object(h.a)("".concat(this.Qg,"aul"),{id:this.id}),ca=new FormData,ma={};aa.annots&&(ma.annots="xfdf");aa.watermark&&(ma.watermark="png");aa.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.Daa++,parts:ma};aa.print&&(ma.print=!0);var la=this.rC(ma);ca.append("msg",JSON.stringify(la));return Promise.all([aa.annots,aa.watermark,aa.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var ra=
ja[0],qa=ja[1];ja=ja[2];ra&&ca.append("annots",ra);qa&&ca.append("watermark",qa);ja&&ca.append("redactions",ja);ea.lm[la.reqID]=new e;ba.open("POST",ha);ba.withCredentials=ea.zk;ra=new Promise(function(sa,ta){ba.onreadystatechange=function(){4===ba.readyState&&(200===ba.status?sa():ta("An error occurred while sending down annotation data to the server"))}});ba.send(ca);return ra.then(function(){return ea.lm[la.reqID].promise})})};z.prototype.T8=function(){this.vg||(this.vg=new e,this.vg.request={t:"xod",
noCreate:!0},this.Lj(this.vg.request));return this.vg.promise};z.prototype.$Ha=function(){this.wg||(this.wg=new e,this.wg.request={t:"xod"},this.Lj(this.wg.request));return this.wg.promise};z.prototype.Vs=function(){return!0};z.prototype.request=function(){};z.prototype.Fca=function(){};z.prototype.abort=function(){for(var aa=0;aa<this.fi.length;aa++)this.fi[aa]&&(this.fi[aa].resolve(null),this.fi[aa]=null,this.uK.push(aa));this.close()};z.prototype.RN=function(aa){this.Fj=this.Fj||{};this.Fj.headers=
aa};z.prototype.ct=function(aa){this.Fj=this.Fj||{};this.Fj.internal=this.Fj.internal||{};this.Fj.internal.withCredentials=aa};z.prototype.zk=function(){return this.Fj&&this.Fj.internal?this.Fj.internal.withCredentials:null};z.prototype.getFileData=function(){return Promise.reject()};return z}();Object(ya.a)(n);Object(b.a)(n);Object(b.b)(n);ua["default"]=n},606:function(ya,ua,n){var pa=n(0),oa=n(3),na=n(34),ka=n(56),ia=n(222),fa=n(102),x=function(){function w(b,f,h,e,a,r){void 0===h&&(h=null);void 0===
e&&(e=null);void 0===a&&(a=null);void 0===r&&(r=null);this.ZU=!1;this.Xh=0;this.zE=8;this.Eda=3E3;this.kO=!1;this.b4=this.lOa(b);this.url=f?"".concat(this.b4,"/").concat(f):"".concat(this.b4,"/ws");this.qS=h;this.RE=e;this.pC=a;this.pda=r}w.prototype.lOa=function(b){var f=b.indexOf("://"),h="ws://";0>f?f=0:(5===f&&(h="wss://"),f+=3);var e=b.lastIndexOf("/");0>e&&(e=b.length);return h+b.slice(f,e)};w.prototype.send=function(b){this.vt.readyState===WebSocket.CLOSED||this.ZU||this.vt.send(JSON.stringify(b))};
w.prototype.JL=function(){return Object(pa.b)(this,void 0,void 0,function(){var b,f=this;return Object(pa.d)(this,function(){b=Object(ka.a)("wvsQueryParameters");b.bcid=Object(na.l)(8);Object(ka.b)("wvsQueryParameters",b);return[2,new Promise(function(h,e){var a=Object(ia.a)(f.url);f.kO=!1;f.vt=new WebSocket(a);f.vt.onopen=function(){f.ZU=!1;f.Xh=0;f.RE&&f.RE();h()};f.vt.onerror=function(){f.ZU=!0};f.vt.onclose=function(r){r=r.code;f.pC&&f.pC();1E3!==r&&3E3!==r&&f.Jza(r,h,e)};f.vt.onmessage=function(r){r&&
r.data&&(r=JSON.parse(r.data),r.hb?f.send({hb:!0}):r.end?close():f.qS(r))}})]})})};w.prototype.Jza=function(b,f,h){Object(pa.b)(this,void 0,void 0,function(){var e=this;return Object(pa.d)(this,function(){if(this.kO)return f(),[2];this.Xh<this.zE?setTimeout(function(){e.kO?f():(e.Xh++,Object(oa.i)("Failed to connect to server with WebSocket close code ".concat(b,". Reconnecting to WebViewer Server, attempt ").concat(e.Xh," of ").concat(e.zE," ...")),e.JL().then(f).catch(h))},this.Eda):h(fa.a);return[2]})})};
w.prototype.Ju=function(){var b;void 0===b&&(b=!1);this.Xh=0;this.kO=!0;b?this.vt.close(3E3):this.vt.close();return Promise.resolve()};return w}(),y=function(){function w(b,f,h,e,a,r,z){void 0===e&&(e=null);void 0===a&&(a=null);void 0===r&&(r=null);void 0===z&&(z=null);this.Xh=this.vN=this.id=0;this.RD=!1;this.request=null;this.zE=8;this.Eda=3E3;b=this.MFa(b);this.url=f?"".concat(b,"/").concat(f,"pf"):"".concat(b,"/pf");this.GO=h;this.qS=e;this.RE=a;this.pC=r;this.pda=z}w.prototype.MFa=function(b){var f=
b.lastIndexOf("/");0>f&&(f=b.length);return b.slice(0,f)};w.prototype.cra=function(b){b=b.split("\n");for(b[b.length-1]&&b.pop();0<b.length&&3>b[b.length-1].length;)"]"===b.pop()&&(this.id=0);0<b.length&&3>b[0].length&&b.shift();for(var f=0;f<b.length;++f)b[f].endsWith(",")&&(b[f]=b[f].substr(0,b[f].length-1));return b};w.prototype.Dda=function(){return Object(pa.b)(this,void 0,void 0,function(){var b=this;return Object(pa.d)(this,function(f){switch(f.label){case 0:return this.Xh++<this.zE?[4,new Promise(function(h){return setTimeout(function(){b.pda();
b.JL();h()},3E3)})]:[3,2];case 1:f.aa(),f.label=2;case 2:return[2]}})})};w.prototype.RFa=function(b){Object(pa.b)(this,void 0,void 0,function(){var f,h;return Object(pa.d)(this,function(e){switch(e.label){case 0:f=null,h=0,e.label=1;case 1:if(!(h<b.length))return[3,6];f=JSON.parse(b[h]);if(!f)return[3,5];if(!f.end)return[3,2];close();return[3,5];case 2:if(!f.id||Number(f.id)===this.id)return[3,4];Object(oa.i)("Reconnecting, new server detected");this.Ju();return[4,this.Dda()];case 3:return e.aa(),
[3,5];case 4:f.hb&&Number(f.id)===this.id?this.send({hb:!0}):this.RD||this.qS(f),e.label=5;case 5:return++h,[3,1];case 6:return[2]}})})};w.prototype.VDa=function(b){Object(pa.b)(this,void 0,void 0,function(){var f,h,e;return Object(pa.d)(this,function(a){switch(a.label){case 0:if(!(3<=b.readyState))return[3,2];try{f=b.responseText.length}catch(r){return Object(oa.g)("caught exception"),[2]}if(0<f)try{h=this.cra(b.responseText),0===this.id&&0<h.length&&(e=JSON.parse(h.shift()),this.id=e.id,this.Xh=
0),this.RFa(h)}catch(r){}return this.RD?[3,2]:[4,this.K6()];case 1:a.aa(),a.label=2;case 2:return[2]}})})};w.prototype.K6=function(){return Object(pa.b)(this,void 0,void 0,function(){var b=this;return Object(pa.d)(this,function(){return[2,new Promise(function(f,h){function e(){return Object(pa.b)(b,void 0,void 0,function(){return Object(pa.d)(this,function(r){switch(r.label){case 0:h(),this.Ju(),r.label=1;case 1:return this.RD&&this.Xh<this.zE?[4,this.Dda()]:[3,3];case 2:return r.aa(),[3,1];case 3:return[2]}})})}
b.request=new XMLHttpRequest;b.request.withCredentials=b.GO;var a=Object(ia.a)(b.url,0!==b.id?{id:String(b.id),uc:String(b.vN)}:{uc:String(b.vN)});b.vN++;b.request.open("GET",a,!0);b.request.setRequestHeader("Cache-Control","no-cache");b.request.setRequestHeader("X-Requested-With","XMLHttpRequest");b.request.onreadystatechange=function(){b.VDa(b.request)};b.request.addEventListener("error",e);b.request.addEventListener("timeout",e);b.request.addEventListener("load",function(){b.RE&&b.RE();f()});b.request.send()})]})})};
w.prototype.JL=function(){var b=Object(ka.a)("wvsQueryParameters");b.bcid=Object(na.l)(8);Object(ka.b)("wvsQueryParameters",b);this.vN=this.id=0;this.RD=!1;return this.K6()};w.prototype.send=function(b){var f=this,h=new XMLHttpRequest;h.withCredentials=this.GO;var e=Object(ia.a)(this.url,{id:String(this.id)}),a=new FormData;a.append("data",JSON.stringify(b));h.addEventListener("error",function(){f.Ju()});h.open("POST",e);h.setRequestHeader("X-Requested-With","XMLHttpRequest");h.send(a)};w.prototype.Ju=
function(){this.id=0;this.RD=!0;this.pC&&this.pC();this.request.abort();return Promise.resolve()};return w}();ya=function(){function w(b,f,h){this.Z4=b;this.target=f;this.GO=h}w.prototype.Bva=function(b,f,h,e,a){void 0===b&&(b=!0);void 0===f&&(f=null);void 0===h&&(h=null);void 0===e&&(e=null);void 0===a&&(a=null);return b?new x(this.Z4,this.target,f,h,e,a):new y(this.Z4,this.target,this.GO,f,h,e,a)};return w}();ua.a=ya}}]);}).call(this || window)
